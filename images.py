import framebuf

from render import DisplayController

IMAGE_DIM = 32


def show_image(display: DisplayController, img_path: str, x: int, y: int):
    """
    Displays the given image on the e-ink display.
    :param display: the display controller
    :param img_path: the image path
    :param x: the x coordinate
    :param y: the y coordinate
    """
    print(f"showing image {img_path} at {x},{y}")

    fb: framebuf.FrameBuffer
    if img_path == 'cloud':
        fb = framebuf.FrameBuffer(bytearray(
            b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xaf\xff\xff\xfe\x01\xff\xff\xf8\x00\xff\xff\xf0\x00\x7f\xff\x60\x00\x3f\xfc\x00\x00\x3f\xf8\x00\x00\x1f\xf0\x00\x00\x1f\xf0\x00\x00\x1f\xc0\x00\x00\x0f\xc0\x00\x00\x03\x80\x00\x00\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x00\x01\xc0\x00\x00\x01\xe0\x00\x00\x07\xfa\xa9\x52\xaf\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'),
                                  IMAGE_DIM, IMAGE_DIM, framebuf.MONO_HLSB)

    elif img_path == 'fog':
        fb = framebuf.FrameBuffer(bytearray(
            b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x8f\xff\xff\xfe\x01\xff\xff\xf8\x00\xff\xff\xd0\x00\xff\xff\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x3f\xfc\x00\x00\x3f\xf0\x00\x00\x0f\xe0\x00\x00\x07\xe0\x00\x00\x07\xff\xe0\x00\x03\xff\xc0\x00\x03\x80\x00\x00\x03\x80\x00\x00\x07\xff\xfe\x00\x07\xff\xfe\x00\x1f\xfe\x00\x07\xff\xfc\x00\x07\xff\xff\xfd\xb7\xff\xff\xff\xff\xff\xea\x5f\xff\xff\xc0\x0f\xff\xff\xe9\x3f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'),
                                  IMAGE_DIM, IMAGE_DIM, framebuf.MONO_HLSB)

    elif img_path == 'lightning':
        fb = framebuf.FrameBuffer(bytearray(
            b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x8f\xff\xff\xfe\x01\xff\xff\xf8\x00\xff\xff\xd0\x00\xff\xff\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x3f\xfc\x00\x00\x3f\xf0\x00\x00\x0f\xe0\x00\x00\x07\xe0\x1e\x07\x87\xc0\x1f\x0f\x83\xc0\x3b\x0d\xc3\xc0\x33\x0c\x83\xe0\x73\x19\xc7\xe0\x63\xd9\xe7\xf8\x63\xf8\xff\xff\xe0\x70\x3f\xff\xc0\x70\x3f\xff\xc0\xe0\x3f\xff\xd0\xf8\x7f\xff\xf9\xfe\x7f\xff\xf9\xfc\x7f\xff\xf9\xfc\xff\xff\xfb\xfe\xff\xff\xfb\xfd\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'),
                                  IMAGE_DIM, IMAGE_DIM, framebuf.MONO_HLSB)

    elif img_path == 'rain':
        fb = framebuf.FrameBuffer(bytearray(
            b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x8f\xff\xff\xfe\x01\xff\xff\xf8\x00\xff\xff\xd0\x00\xff\xff\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x3f\xfc\x00\x00\x3f\xf0\x00\x00\x0f\xe0\x00\x00\x07\xe0\x00\x00\x07\xc0\x00\x00\x03\xc0\x00\x00\x03\xc0\x00\x00\x03\xe0\x00\x00\x07\xe0\x00\x00\x07\xf8\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xfe\xee\x67\x7f\xfc\x66\x66\x3f\xfc\xc6\x66\x7f\xfe\x66\x67\x3f\xfe\xe6\x67\x7f\xff\xe6\xe7\xff\xff\xef\xf7\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'),
                                  IMAGE_DIM, IMAGE_DIM, framebuf.MONO_HLSB)

    elif img_path == 'snow':
        fb = framebuf.FrameBuffer(bytearray(
            b'\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfe\x7f\xff\xff\xfe\x7f\xff\xff\xe2\x47\xff\xff\xf0\x0f\xff\xff\x38\x1c\xff\xff\x3c\x3c\xff\xf9\x3e\x7c\x9f\xf8\x1e\x78\x1f\xfe\x1e\x78\x7f\xf8\x0e\x70\x1f\xf0\x42\x42\x0f\xff\xf0\x0f\xdf\xff\xf8\x1f\xff\xff\xf8\x1f\xff\xfb\xe0\x0f\xdf\xf0\x06\x40\x0f\xfc\x0e\x70\x3f\xfc\x1e\x78\x7f\xf8\x3e\x7c\x1f\xf9\x3e\x7c\x9f\xff\x3c\x3c\xff\xff\x38\x1c\xff\xff\xf0\x0f\xff\xff\xe2\x4f\xff\xff\xfe\x7f\xff\xff\xfe\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'),
                                  IMAGE_DIM, IMAGE_DIM, framebuf.MONO_HLSB)

    elif img_path == 'sun':
        fb = framebuf.FrameBuffer(bytearray(
            b'\xff\xfe\x7f\xff\xff\xfe\x7f\xff\xff\xfc\x3f\xff\xff\xfe\x7f\xff\xfb\xff\xff\xdf\xf1\xff\xff\x8f\xf8\xff\xff\x1f\xfc\xf0\x0f\x3f\xff\xc0\x03\xff\xff\x80\x01\xff\xff\x00\x01\xff\xff\x00\x00\xff\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xde\x00\x00\x7b\x0e\x00\x00\x70\x0e\x00\x00\x70\xde\x00\x00\x7b\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xff\x00\x00\xff\xff\x80\x01\xff\xff\x80\x01\xff\xff\xe0\x07\xff\xfc\xf0\x1f\x3f\xf0\xff\xff\x0f\xf1\xff\xff\x8f\xfb\xff\xff\x9f\xff\xfe\x7f\xff\xff\xfc\x3f\xff\xff\xfe\x7f\xff\xff\xfe\x7f\xff'),
                                  IMAGE_DIM, IMAGE_DIM, framebuf.MONO_HLSB)

    else:
        print(f"unknown image path {img_path}")
        return

    display.blit(fb, x, y)
    # epd.display(epd.buffer)
